title = "Account"
url = "/account"
layout = "admin"
is_hidden = 0

[account]
redirect = "account"
paramCode = "code"

[session]
security = "all"
redirect = "s"

[imageUploader]
placeholderText = "Click or drag images to upload"
maxSize = 5
fileTypes = ".gif,.jpg,.jpeg,.png"
previewWidth = 100
previewHeight = 100
previewMode = "auto"
previewFluid = 0
==
<?php

function onInit()
{
    //$this->imageUploader->bindModel('files', Project::find(1));
    //new Project;
    $this->imageUploader->bindModel('photoTest',new \Rainlab\User\Models\User);


    //var_dump($this->page);

//Auth::user->id
//echo '<pre>';
    //print_r(Auth::user->id);
       // echo '</pre>';
//die();


}



use Yandex\Disk\DiskClient;


function onStart()
{

    require_once 'phar://yandex-php-library_master.phar/vendor/autoload.php';

    define('ACCESS_TOKEN', 'bbbef0b0944e4ce79219ac5884cbbebc');

    $diskClient = new DiskClient(ACCESS_TOKEN);
    $diskClient->setServiceScheme(DiskClient::HTTPS_SCHEME);

    $diskSpace = $diskClient->diskSpaceInfo();

    echo ACCESS_TOKEN;

    #echo user.name;

    #$path = $this->page['user'];

    #$dirContent = $diskClient->createDirectory($path);

    #if ($dirContent) {

        #$this['qwe'] = 'Создана новая директория "' . $path . '"!';

    #}

}

function onTest()
{
    $value1 = post('value1');
    $value2 = post('value2');
    $this['result'] = "12 123";
}

?>
==
<div class="conteiner">
    <div class="row">
        <div class="col-lg-1"></div>
        <div class="col-lg-10 ">
                
                {% component 'account' %}

            <hr />


            <form data-request="onTest" data-request-update="result: '#result'">
               <input type="text" name="value1" value="{{user.name}}"/>
                <input type="text" name="value2" value="{{user.email}}" />
                <input type="submit" value="upload">
            </form>
            <div id="#result"></div>

            {{ result }}
            
        </div>
        <div class="col-lg-1"></div>
    </div>
</div>
